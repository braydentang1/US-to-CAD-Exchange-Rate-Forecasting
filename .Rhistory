year = 2013
page = read_html(paste("https://en.wikipedia.org/wiki/",year,"_NHL_Entry_Draft", sep = ""))
library(RSelenium)
library(rvest)
page = read_html(paste("https://en.wikipedia.org/wiki/",year,"_NHL_Entry_Draft", sep = ""))
players = page %>%
html_nodes("th+ td a")
players = page %>%
html_nodes("th+ td a") %>%
html_text(.)
players
players = page %>%
html_nodes(".wikitable th+ td a") %>%
html_text(.)
players
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.)
junior.team
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.)
players
library(tidyverse)
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.)
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.)
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.)
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_replace(., " ", ".")
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.)
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "(")
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[(]")
playuers
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "*[(]")
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^()]")
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]")
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.)
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*")
players
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
players
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.)
junior team
junior.team
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
junior.team
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*")
junior.team
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.)
junior.temam
junior.team
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\((.*)")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "((<=\)).*")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "/\(([^)]+)\)/")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\(([^)]+)\)/")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[\\(\\)]")
position
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)")
position
junior.league = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_trim(., "both")
junior.league
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_remove(., "(") %>%
str_remove(., ")")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
junior.league = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_trim(., "both") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
junior.league
tibble(Player = players, Position = position, Junior.Team = junior.team, Junior.League = junior.league)
abc = tibble(Player = players, Position = position, Junior.Team = junior.team, Junior.League = junior.league)
View(abc)
source('~/GitHub/NHL.Draft.Projections/Scrape NHL.R', echo=TRUE)
abc = getData(year = 2016)
year = 2016
page = read_html(paste("https://en.wikipedia.org/wiki/",year,"_NHL_Entry_Draft", sep = ""))
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
players
year = 2015
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
junior.league = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_trim(., "both") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
page = read_html(paste("https://en.wikipedia.org/wiki/",year,"_NHL_Entry_Draft", sep = ""))
players = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
position = page %>%
html_nodes(".wikitable th+ td") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
junior.team = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "[^(]*") %>%
str_trim(., "both")
junior.league = page %>%
html_nodes("h3+ .wikitable td:nth-child(5) , .tright+ .wikitable td:nth-child(5) , .mobile-float-reset+ .wikitable td:nth-child(5)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_trim(., "both") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
tibble(Player = players, Position = position, Junior.Team = junior.team, Junior.League = junior.league)
junior.team
page = read_html(paste("http://www.hockeydb.com/ihdb/draft/nhl",year,"e.html", sep = ""))
players = page %>%
html_nodes("#sortableTable0 td:nth-child(4) a") %>%
html_text(.)
View(page)
rd = rsDriver(browser = c("chrome"), chromever = "74.0.3729.6")
rem_dr = rd[["client"]]
url = paste("http://www.hockeydb.com/ihdb/draft/nhl",year,"e.html", sep = "")
url = paste("http://www.hockeydb.com/ihdb/draft/nhl",year,"e.html", sep = "")
rem_dr$navigate(url = url)
page = read_html(rem_dr$getPageSource()[[1]])
players = page %>%
html_nodes("#sortableTable0 td:nth-child(4) a") %>%
html_text(.)
players
position = page %>%
html_nodes("#sortableTable0 td:nth-child(5)") %>%
html_text(.)
junior.team = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.)
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_squish(.) %>%
str_extract(., "\\([^()]+\\)") %>%
str_trim(., "both") %>%
str_remove(., "[(]") %>%
str_remove(., "[)]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.)
junior.league
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\[(.*?)\]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "[(.*?)\]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "[\(.*?)\]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\[(.*?)\]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "[(.*?)]")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "[\(.*?)]\")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\\([^()]+\\)")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\\([^[]]+\\)")
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\\[(.*?)\\]")
junior.league
junior.league = page %>%
html_nodes("#sortableTable0 td:nth-child(6)") %>%
html_text(.) %>%
str_extract(., "\\[(.*?)\\]|\\((.*?)\\)")
junior.league
tibble(Player = players, Position = position, Junior.Team = junior.team, Junior.League = junior.league)
